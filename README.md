# Image Management Application

## Description
This project is a backend application that allows visitors to upload images to a AWS S3 storage bucket. Administrators can log into a secure interface to view a paginated list of uploaded images.

## Table of Contents
- [Features](#features)
- [Requirements](#requirements)
- [Installation](#installation)
- [Usage](#usage)

## [Features](#features)
- **Image Upload**: API endpoint to allow users to upload one or more images. Images are stored in a cloud storage bucket (AWS S3 or Google Cloud Storage).
- **Admin Interface**: A secure interface, accessible only by email and password authentication, allows administrators to view and manage the list of uploaded images.
- **Pagination**: The list of images is paginated for better navigation.
- **Pre-signed URLs**: Images are accessible via secure pre-signed URLs generated by the application.

## [Requirements](#requirements)
- Docker
- AWS S3 account

## [Installation](#installation)
1. Clone the repository:
    ```bash
    git clone https://github.com/khersinpro/symfony-aws-s3
    ```
2. Install docker if you haven't already

3. Set up Amazon S3:

        - Create an AWS account if you don't have one
        - Create a new S3 bucket for this project
        - Create an IAM user with programmatic access and S3 permissions
        - Note down the AWS Access Key ID and Secret Access Key

4. Configure environment variables:

        - Create a `.env.local` file in the root directory of the project
        - Copy the `.env` file to `.env.local`
        - Edit `.env.local` and add your S3 configuration:
          AWS_BUCKET_NAME=your_bucket_name
          AWS_ACCESS_KEY_ID=your_access_key_id
          AWS_SECRET_ACCESS_KEY=your_secret_access_key
          AWS_DEFAULT_REGION=your_bucket_region

5. Build the Docker image:
    ```bash
    docker-compose -p image-management-app up --build -d
    ```

6. Execute this command to open a shell in the container:
    ```bash
    docker exec -it image-management-app-web-1 bash
    ```

7. Initialize the project:
    ```bash
    composer install
    ```

8. Create the database and run the migrations:
    ```bash
    php bin/console doctrine:database:create
    php bin/console make:migration
    php bin/console doctrine:migrations:migrate
    ```

9. Create an admin user:
    ```bash
    php bin/console app:create-admin
    ```

## [Usage](#usage)
1. Lauch the application in your browser:
```bash
http://localhost:8080
```
2. Login with the email and password you created in the previous step.
3. Use Postman or any other API testing tool to upload images to the API endpoint:
   - Endpoint: `http://localhost:8080/api/image`
   - Method: POST
   - Body: form-data
   - Key: `images[]` (note the square brackets to allow multiple file upload)
   - Value: Select File(s)

You can upload one or multiple images by selecting them in the 'Value' field. The `images[]` field in the request body can accept an array of images.